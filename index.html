<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Firebase リアルタイムチャット</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #chat { border: 1px solid #ddd; padding: 10px; width: 300px; height: 300px; overflow-y: scroll; }
        #message { width: 240px; }
        .message { margin-bottom: 10px; padding: 5px; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>
    <h1>リアルタイムチャット</h1>
    <div id="chat"></div>
    <input type="text" id="message" placeholder="メッセージを入力">
    <button onclick="sendMessage()">送信</button>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        const chatRef = database.ref('messages');

        chatRef.on('child_added', function(snapshot) {
            const message = snapshot.val();
            const messageElement = document.createElement('div');
            messageElement.className = 'message';
            messageElement.textContent = `${message.name}: ${message.text}`;
            document.getElementById('chat').appendChild(messageElement);
            document.getElementById('chat').scrollTop = document.getElementById('chat').scrollHeight;
        });

        function sendMessage() {
            const message = document.getElementById('message').value;
            const name = "User"; // ゲストユーザーとして名前を設定
            chatRef.push({
                name: name,
                text: message
            });
            document.getElementById('message').value = '';
        }
    </script>
</body>
</html>
